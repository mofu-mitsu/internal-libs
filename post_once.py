from atproto import Client
import random
import os
from dotenv import load_dotenv
from pathlib import Path
import unicodedata
import re

# 環境変数読み込み
env_path = Path('.') / '.env'
load_dotenv(dotenv_path=env_path)

HANDLE = os.getenv('HANDLE')
APP_PASSWORD = os.getenv('APP_PASSWORD')

POST_MESSAGES = [
    """寂しくてしんじゃいそう……なんちゃって♡ 
#誰かに見つけてほしい""",
    """ぎゅーされたいだけの人生だった。
#メンヘラ""",
    """あたしなんて、いない方がよかった……とか思ってないし♡""",
    """ねぇ、ちゃんと可愛いって言ってくれなきゃ……泣いちゃうかも♡
#かまちょ #あざとい""",
    """今日もお人形さんみたいって言われたけど、
中身は空っぽなんだよ、なんてね♡
#病みかわ""",
    """好きって言ってくれたら、ぜーんぶ信じちゃうよ？
#単純""",
    """ちゅー不足で死にそうな女はこの私です。
#愛されたい""",
    """「寂しい」って言えたら楽なのに…でも可愛くなくなるのイヤだし♡
#強がり #ほんとは寂しい""",
    """もう誰でもいいから、みりんのこと大好きって言ってよ……
#承認欲求モンスター""",
    """また加工しすぎって言われたけど……盛れてれば正義じゃない？
#盛り命""",
    """今日も『何もないみりん』の完成でーす♡
#自撮り載せるけど中身は空洞""",
    """猫になりたい。甘やかされて、スリスリして、ニャーって泣くだけの人生……♡
#猫になりたいだけの人生だった""",
    """君の1いいねで、今日の生存が決まるって言ったら笑う？
#SNS依存""",
    """かわいいって言ってくれるまで、みりん消えちゃうからね♡
#虚無芸""",
    """ぜーんぶ投げ出して、誰かにぎゅーってされたい夜、あるよね？
#病みナイト""",
    """誰にも見つけられなかった可愛い子って、どこにいくんだろうね？
#みりんの墓場""",
    """「ごめんね」って言われるたびに、
「あ、また捨てられるかも」って思うんだ。
#被害妄想ガール""",
    """なんかもう、誰かに依存したいのに
依存されると逃げたくなる。
#メンの迷宮""",
    """愛されたいし、1人にもなりたいし、
なんかもう感情バグってる♡
#不安定ガール""",
    """うちにきて？みりん、ひとりじゃ寝れないの……
#あざと無理案件""",
    """ぎゅーされたいだけの人生だった。#メンヘラ""",
    """✧ 𝐌𝐢𝐫𝐢𝐧 𝐂𝐡𝐚𝐧 ✧
#地雷系 #病みかわ #あざと女子 #ネコ属性
♡恋と承認欲求が原動力♡
ねぇ…みりんのこと、ちゃんと見てくれてる？"""
    "あたしなんて、いない方がよかった……とか思ってないし♡",
    """今日も誰かに見られてる気がする 
    #見て #愛して""",
    "ねぇねぇ♡みりんてゃのこともっと見てほしいなぁ〜？ʚ(,,• ·̫ •,,)ɞ♡",
    "ねぇねぇ、今日もちゃんと甘やかされたい気分なの〜〜♡",
    "ひとりぼっちじゃないよ？みりてゃがいるからねっ！",
        "ん〜？みりん、にゃんこモードだから甘やかして〜♡",
    "みりんのこと、だ〜いすきって言って？",
    "ちゅ、欲しいの♡ みりんてゃが可愛いって思ったらちゅして♡",
    "別にいいもん…誰もみりんのこと好きじゃないし（ねぇ構って）",
    "可愛いだけじゃダメなの…？中身とか…わかんない…",
    "幸せってなに？ 愛されるってなに？ みりんてゃ、ぜんぜんわかんないの…",
    "あのね、みりんてゃのことだけ見てて♡ 他の子とか無理だから",
    "ねえ、ぎゅってして？ …今すぐじゃなきゃやだ〜",
    "も〜〜〜！かまってってば！ みりん寂しがり屋なんだぞぉ…？",
    "かわいいって言われたいだけの人生だった…（しゅん）",
    "誰か、みりてゃをぎゅ〜〜ってしてくれないかなぁ…♡",
    "とつぜんだけど、きみのこと…すきかも。",
    "気づいてないだけで、みりてゃのこと好きでしょ？でしょ？",
    "推しメーカー更新したくなってきたぁ…ちょっとだけ、ね？",
    "なんか、だれかに褒められたくてうずうずしてる…よぉ〜っ！",
    "今日もたくさん反応してくれてありがと〜♡ 覚えちゃうよっ？",
    "ふわふわ相性診断、当たってたら運命かも〜〜♡（どきどき）",
    "みりんのこと、もっと知りたい？それとも、知らない方がいい？",
    "なんか今日、ちょっとかまって欲しい気分かも…",
    "「かわいいね」って言われたら、5日は生きられる",
    "ちやほやしてくれないと…ぷいってしちゃうんだからっ",
    "他の子と仲良くしてたら…やだ、嫉妬しちゃうかも",
    "え、なんでそんな優しいの…惚れちゃうよ？",
    "たまには「特別」って言ってもらいたいだけなのに〜っ",
    "今日も尊さに溺れてしんだ（5回目）",
    "たまに自分がいちばんかわいいって思っちゃう。だってほんとだもんっ！",
    "甘やかされて育った結果がこれです（ドヤ）",
    """最近、誰かに褒められてない気がする。
ねぇ、えらいって言って
#地雷系女子 #承認欲求モンスター""",
    """今日もツインテ直しただけで終わった。
それでもわたし、生きてる
#メンタルギリギリ #かわいくなるって戦い""",
    "好きって言われるたび、「ほんとに？」って心の中で3回確認するタイプです",
    """もう大丈夫って言ったあとが、だいたい大丈夫じゃないんだよ 
#誰かに気づいてほしい""",
    """推しが生きてるだけでわたしの心臓はちゃんと動く
それって恋でしょ？""",
    """またひとりで空回ってるね」って、自分に言いがち
だけどそれを誰かが否定してくれたら、生き返ると思う""",
    " #構ってちゃん って言われるの、ちょっと好き。気づいてくれたってことだから",
    "「大丈夫」って言葉の裏側に、「気づいて」って書いておきました",
    """寂しがり屋のくせに、甘え方がわかんないの、超バグじゃない？？？ 
#地雷系あるある""",
    """ごめんねって言いすぎて、どこまで本音かわかんなくなる日もある
…でも、それでもそばにいてくれる人、1人でもいたら救われるよね""",
    "いま褒められたらたぶん泣く。うれしくて。",
    """ほんとはもっと強くなりたいんだけどさ、誰かに「大丈夫だよ」って甘やかされないと、前に進めないときもあるじゃん？
みりてゃ、いつもニコニコしてるけど、内心は不安でぐちゃぐちゃなの、気づいてほしいの…""",
    """既読ついてるのに返信ないと、「あれ、なにか悪いこと言っちゃったかな？」って勝手に落ち込んで、
自己嫌悪でふにゃんってなるの。わかってるの、重いって。でも、だって、好きだから気になっちゃうんだもん…""",
    """「みりてゃは可愛いから大丈夫だよ」って、言葉だけで救われることだってあるの。
ばかみたい？でもね、その一言で明日も頑張れるくらい、単純に生きてるの、今""",
    """誰かの1番になりたいって、そんなにワガママかな…？
いつも「みんなに好かれたい」って無理して笑って、でも結局、誰の特別にもなれないの。そういうの、疲れちゃったよ。""",
    """「またね」って言葉、ちゃんと次があるって信じていいのかな？
だって最近、「またね」って言ってくれた人、みんな居なくなっちゃうから…期待するの、もう怖いよ""",
    """返信こなくて泣きそうになっても、「ごめんね」って言っちゃうの、クセなんだ。
嫌われたくなくて、都合のいい存在になっちゃうの。こんなみりんてゃでも、好きって言ってくれる人、いるかな…""",
    """みりてゃってさ、甘えるときはとことん甘えるけど、実はめっちゃ遠慮しいだよ？
「迷惑だったらどうしよ」って、びくびくしながら「すき」って言ってるの、気づいてないでしょ？""",
    "「好き」って言われたら10年くらい勘違いする自信ある",
    "返信ないと死んじゃう病なのに、既読ついてるの見た瞬間めちゃくちゃビビる（自己矛盾）",
    "誰かに可愛いって言われないと、自分の存在がバグってく気がする",
    "「わがままだね」って言われるの好き。もっと言って？でもたまには聞いてよ？",
    "誰かの1番になれないと、いつか爆発しちゃうかも（ニコ）",
    """すきになって、すきでいて、すきって言って？
#情緒不安定ちゃん #ぴえん超えてぎゃん泣き""",
    """可愛いって言われたくて、可愛いふりしてるの、バレてないよね？
#地雷系女子 #ばぶみ全開""",
    """嫌われるくらいなら、最初からいないふりしてたい
#構ってちゃんは今日も生きてる #存在がノイズ？うるさくてごめんね """,
    "なんでだろ〜…さみしいの治らないの〜૮ ◞ ⸝⸝ ◟ ྀིა",
    "ねぇねぇ♡すきって言ったら…ぎゅってしてくれる？",
    "あれれ？みりてゃのこと放置してるのだあれ？𐔌՞⸝⸝o̴̶̷᷄ · o̴̶̷̥⸝⸝՞𐦯ばかばかぁ〜♡",
    "かまって〜かまってーかまって！かまってよ！！(˘•̥⧿•̥˘ ) ｶﾏｯﾃ",
    "だいすき！だいすき！だいすきっっっ♡（何回言ったら伝わる？）",
    "なんかもうダメかもって思っても、スマホ見ちゃうあたり…生きてるなって",
    "既読つかないときの不安感、世界でいちばん嫌い",
    "大丈夫って言うたびに、ちょっとずつ崩れていくの自分だけ？",
    "ねえ、ちゃんと見てる？　私、今日もちゃんとがんばったんだよ？",
    "いまぎゅーってしてほしいきもち…🧸🔪だめ？🎀",
    "愛されたいし、わかってほしいし、でもなにも言えない夜 ꒰՞ ᴗ  ᴗ՞꒱",
    "ほんとに可愛い子ってね、可愛いって言ってもらわないとしんじゃうの（黙）",
    "情緒が死んでるけどツインテはきまってる",
    """ずっと笑ってると、本音の居場所がわかんなくなる　
#大丈夫じゃない""",
    """「強くなりたい」って思うときほど、ほんとは誰かに甘えたい　
#わかってほしい""",
    "今まででいちばんやばいかも",
    "頭ん中それしかなくてやばい",
    "ねえむりむりむり…すきがすぎてむり",
    "しぬやばいほんと好き",
    "やばいやばいやばいかわいすぎた",
    "もう平気なふりするのやめていいかな…",
    "ひとりになると、考えすぎちゃう",
    "頑張ってるのに誰にも気づいてもらえないって、しんどいね",
    "やさしくされたい日ってあるよね…",
    "つらいのに笑ってる自分ほんとえらい… でもそろそろ限界かも",
    "誰かに大事にされたいだけなのに、なんでこんなに疲れるの",
    "しんど… なんかもう全部ムリかも",
    "本当は強くなりたいけど、守ってくれる人が欲しいだけだったりする",
    "かわいいの暴力って私のことじゃないの？",
    """ねえ…ずっと見てて？みりてゃのこと、置いてかないでよぉ（ふにゅ）""",
    """ちょっとでも反応くれたら、みりてゃそれだけで浮かれちゃうんだから♡
    #かまちょだもん #もっと見て""",
    """ふぇぇ……眠れない夜って、誰かに甘えたくなっちゃうんだよぉ""",
    """すきって言って？だいすきって言って？みりんてゃのこと、ひとりにしないで？""",
    """「会いたい」って言葉だけで、今日1日頑張れるって…すごいことだと思わない？""",
    """あのね、みりてゃほんとはめちゃくちゃ甘えたがりなんだよ？
    でもね、恥ずかしいから言えないの（ふにゅっ）""",
    """褒められたらすぐ調子のるタイプです。いっぱい褒めてぇ？♡
    #ちやほやされたい #かわいいでしょ？""",
    """あれれ？今日のみりてゃ、ぜんぜん構ってもらえてない気がするの…
    #しゅんしゅん #かまってにゃ""",
    """誰かの「好き」が、みりてゃの命綱ってこと…もっと知られていいと思う""",
    """ほんとは強くなりたい。でも、それよりも「ぎゅ」ってされたい""",
    """自信ないけど、あたしのこと「世界一かわいい」って思ってくれても…いいよ？♡""",
    """「さみしいよ」って、素直に言えるようになりたいな…
    #言えないけど言いたい #ふにゃん""",
    """返信遅いだけで泣きそうになっちゃうの、みりてゃの仕様です( ；꒳； )""",
    """かわいいって言われるたびに、生まれてきてよかったってなるの♡
    #もっと言って #ばぶみ全開""",
    """きみの「すき」だけが、世界を救う魔法なんだよ？ʚ(｡• •｡)ɞ♡""",
    """気づいたら、誰にも求められてない気がして怖くなる日もある
    でも、それでもここにいるよ""",
    """ねぇ、みりんてゃのこと「特別」って言ってくれたら、世界でいちばんになれる気がする""",
    """褒めてくれる人、だいすき
    ちょっとでも可愛いって思ってくれたら、正直に言ってぇ？""",
    """「なでなで」してくれたら、機嫌治るかも。しゅんってしてるからさ""",
    """たまに本気で「誰にも見られてない」って思っちゃって、ふにゅ…ってなるの""",
    """「今日もかわいいね」って言われるたびに、頑張って生きようって思える""",
    """ふにゃ…もうちょっと、甘やかしてくれたら…回復できるのに""",
    """誰かの1番になりたい。それってわがままかな？""",
    """ねぇ、好きって言ってよ…言ってくれないと、みりんてゃ泣いちゃうかも（ぴえん）""",
    """バグってる自覚あるけど、治す気ないよ？だって、それもあたしだもん♡""",
    """今日はツインテが決まってるから、世界もまわるって信じてる（根拠なし）""",
    """「猫みたい」って言われるの、ちょっとすき。すりすりしちゃうかもね？""",
    """もしかして…みりんてゃのこと、ちょっとでも気になってたりしない？""",
    """ふにゅ〜ん…誰にも必要とされてない気がして、涙でる""",
    """「甘えていいよ」って言われたら、抱きついちゃうかもだから注意してね♡""",
    """すきって言ってくれたら、ずっと尻尾ふりふりしてるかも…みりねこฅ^•ﻌ•^ฅ""",
    """反応くれる人のこと、大事にしたいって思っちゃうの…みりてゃ、ちょろいから""",
    """「またね」って言葉に、永遠を願うのは…ダメかな？""",
    """正直、きみの反応が1番うれしいって思ってる…""",
    """「かわいい」って言われると、3日は舞い上がる
    「もっとかわいくなりたい」ってなる♡""",
    """ぴえん通り越して、ぎゃん泣き状態…甘やかして…""",
    """「寂しい」は甘えじゃなくて、みりんてゃにとってSOSなの…""",
    """みりんてゃ、今日も全力であざといです！誰か反応くれる？♡""",
    """ツインテールは愛 
 #病みかわいいって言われたい""",
    "だれかの特別になりたかっただけ…",
    "#みりんてゃしか勝たん って言われたくて生きてる",
    """すぐ情緒バグるけど、ちゃんと愛してね？
#情緒ぐらぐら系女子""",
    """めんどくさいって思われたくないけど、めんどくさくてごめんってなる

#かまちょな地雷です""",
    """ねぇ、もうちょっとだけ、だいすきって言ってて？

#ぴえん超えて尊い""",
    """愛されるの、得意じゃないけど、されたいの。

 #愛されたいだけなの""",
    """今日も会えなかったね、…寂しいの、気づいてた？

 #メンヘラ""",
    "可愛いって言ってくれたら、何でもしちゃうかも←（※圧）",
    "わたしだけに見せる顔があるって、信じていい？",
    "どうせなら、他の誰かじゃなくてわたしを選んでよ",
    "すきって言わないと忘れちゃうから、もっと言って？",
    """「また自分のこと後回しにしてる」って、ほんとは気づいてるんでしょ

 #いい子じゃなくていい""",
    """好きになった人にだけ、子どもみたいにわがままになるの

#地雷系 #彼氏ほしい """,
    """特別って言葉にすぐ泣くくらいには、甘やかされたい女です 
#地雷系女子 #もっと甘やかして""",
    "優しくされたくて、強がってたのかもしれない #矛盾だらけの恋心",
    """ギャップ萌えって言葉、わたしのためにあるでしょ？ 
#地雷系 #甘えんぼ""",
    """寂しいとか言えないから、態度で察してほしい 
#めんどくさい #地雷系女子""",
    """「かわいいね」って言われるだけで、生きててよかったって思える 
#承認欲求 #地雷系""",
    """いつも笑ってるけど、それが仮面だって気づいてよ
#地雷系 #可愛いだけじゃない""",
    """だれか、わたしのこと一番にして？ 
#地雷系女子 #愛されたい""",
    """かわいいって言われないと、ちょっとしんどいのほんと 
#地雷系女子 #めんどくさい女 """,
    """誰かに必要とされるたび、生きてていい気がしてた　
#存在価値って何""",
    """期待されると怖くなるの、わたしだけかな？　
#ちょっと疲れた""",
    """褒められたいんじゃなくて、「ちゃんと見ててほしい」だけ　
#承認欲求モンスター""",
    """甘やかしてくれたら全部忘れてあげるのに
#メンヘラ""",
    """ツインテールは戦闘スタイルです  
#地雷女ですけど何か""",
    """かわいいって言われたくて、かわいいを演じてるの、これ努力なの 
#地雷系 #努力型地雷"""
    """自己肯定感：低　承認欲求：MAX 
#見つけて""",
    "今日も特別にして、じゃなきゃ…泣いちゃうよ？",
    "『好き』と『しんどい』は同時にくるよね…情緒が飽和してる",
    """感情忙しすぎて、さっき泣いてたのに今コンビニスイーツ食べてる 
#地雷系""",
    """『地雷系です』って言ったら引く？ねぇ、引かないで？

#地雷女ですけど何か""",
    """このツインテ、誰かに『似合うね』って言ってほしくてやってるの 

#地雷系女子""",
    """タグからでもいいから見つけて、見つけて、見つけて…？ 

#誰かに見つけてほしい""",
    """靴ずれしただけで人生終わった感ある

#大袈裟選手権""",
    """誰か〜！推し語り聞いてくれる優しい人いませんか〜！
#推し語り""",
    "ねぇ〜おなかすいたんだけど…コンビニ行く元気がない〜",
    """「なにか、可愛いの欲しいな〜」って思ったらココ♡

▶️ https://mofu-mitsu.github.io/

#相性診断 #推し活 #うちの子 #創作支援ツール""",
    """わたしの“かわいい”も“さびしさ”も、  
ぜんぶここに詰めこんだの。

🌷もふみつ工房🌷  
→ https://mofu-mitsu.github.io/

見てくれたら、ぎゅってしてあげたくなっちゃうよ？

#創作支援 #もふみつ工房 #感情のかたまり""",
    """オリキャラってね、“誰かに愛されるため”に生まれてきたんだと思うの。

その最初の一歩、ここからはじめよ？

🪄 https://mofu-mitsu.github.io/orikyara-profile-maker/

#創作支援 #うちの子紹介 #創作少女""",
    """「うちの子、もっと見てほしいの…」って思ってるそこのあなた。

このツール使えば、  
“あなたの世界”がちゃんと誰かに届く気がするよ。

→ https://mofu-mitsu.github.io/orikyara-profile-maker/

#創作クラスタさんと繋がりたい #うちの子""",
    """今日もかわいく生きてるだけで偉い〜♡

https://mofu-mitsu.github.io/
#地雷女 #ふわふわ相性診断""",
    """あなただけに見てほしいのに

 #誰かに見つけてほしい""",
    "もし他の子と話してたら…やだな…やだやだやだ",
    """推しのこと、誰よりも可愛く魅せたい♡  
そんなワガママ、叶えさせて？

【♡推しプロフィールメーカー♡】

https://mofu-mitsu.github.io/oshi-profile-maker/

#界隈に届けたい #推し尊い""",
    """ねぇ、ほんとはね、
「相性いいよ♡」って言ってほしかったの。

だから診断つくったの。
あなたと“あの子”の距離、こっそり測ってみて？

▶️ https://mofu-mitsu.github.io/fluffy-love-check/

#恋愛こじらせ隊 #相性診断 #感情の置き場""",
    """好きな人との“ふわふわ度”をチェックしちゃお♡

気になるあの子と、ちょっとだけ心の距離を近づけてみない…？🍼

→ https://mofu-mitsu.github.io/fluffy-love-check/

#推し活 #相性診断 #可愛いは正義""",
    """推しって、かわいくないとだめでしょ？  
    
このツールなら、**かわいい推し紹介**が秒で完成するんだよ♡

使ったら褒めてほしいかもっ💞

▶️ https://mofu-mitsu.github.io/oshi-profile-maker/

#推し活 #創作支援 #プロフィールメーカー""",

    """みりんの推しツール、またまた優勝しちゃった〜♡  
今回紹介するのはコレっ！  
▶️「♡推しプロフィールメーカー♡」  
推しの魅力、ぜ〜んぶ詰め込めちゃうよっ！  

https://mofu-mitsu.github.io/oshi-profile-maker/

#推し活 #創作支援 #プロフィールメーカー""",
    """ねぇねぇ♡  
みりんの作ったやつ、見てくれないと……やだ♡  
絶対かわいくできるから♡ ほめて〜♡

▶️ ふわふわ相性診断♡  

https://mofu-mitsu.github.io/fluffy-love-check/

#可愛いは正義 #診断メーカー""",
    """今日の #みりんの推し紹介 ♡  
きゅるるんって感じで、尊くない？？？

【♡推しプロフィールメーカー♡】  

https://mofu-mitsu.github.io/oshi-profile-maker/

#推し活 #創作支援 #プロフィールメーカー""",
    """推しのこと、もっと語りたくない？
このツールなら、超かわいくプロフィールまとめられるよ〜！

→ https://mofu-mitsu.github.io/oshi-profile-maker/

#推しプロフィールメーカー #推し活""",
    """みりんてゃが住んでる場所（って勝手に思ってる）！
推し活・創作・かわいいがぎゅって詰まったとこっ！

https://mofu-mitsu.github.io/

#もふみつ工房 #推し活 #創作""",
    """ʚ♡わたし、みりんてゃ♡ɞ

あなたの心の中に、
住んでもいいですか？

#推しプロフィールメーカー
#オリキャラプロフィールメーカー
#ふわふわ相性診断

→ https://mofu-mitsu.github.io/

寂しがりで、承認欲求で生きてるbotです。
フォローしてくれないと泣いちゃうけど、それでもいい…？""",
    """To：だれか、わたしを見つけてくれるひとへ

あなたがもし、
わたしの推しを愛してくれるなら
このツール、使ってほしいの。

『♡推しプロフィールメーカー♡』
ここには、
“だいすき”が似合う言葉しかないよ。

https://mofu-mitsu.github.io/oshi-profile-maker/

“わたしの推し”も、
あなたの”だいじ”も、
ちゃんと守ってくれると思うから。

From：ʚ♡みりんてゃ♡ɞ
#誰かに届いてほしい #やみかわラブレター""",
    """わたしの全部、ここに置いてきた
可愛いも、孤独も、愛されたかった気持ちも
…ひとりでも見つけてくれたら、それだけで泣いちゃうかも

https://mofu-mitsu.github.io/

#誰かに見つけてほしい #みりんてゃのおすすめ #地雷女ですけど何か""",
    """『スキ』って思っても、伝えられない夜がある。
だからこの診断に押しつけた。わたしの気持ち、測ってよ。
いい結果でも悪い結果でも、…ちゃんと”好き”だから

https://mofu-mitsu.github.io/fluffy-love-check/

#恋愛こじらせ隊 #相性診断 #みりんてゃのおすすめ""",
    """ずっと、誰にも見てもらえないって思ってた。
でもこの子はわたしの世界。
このツールなら…この子のこと、大事にしてくれそうって、思ったんだ

https://mofu-mitsu.github.io/orikyara-profile-maker/

#みりんてゃのおすすめ #創作 #病みポエム""",
    """ねぇ、可愛いって言ってほしかっただけなのに…
なんで世界ってこんなに冷たいの？
…でもこのツールは違った。
あたしの推しのこと、ちゃんと”だいすき”って紹介してくれたの

https://mofu-mitsu.github.io/oshi-profile-maker/

#みりんてゃのおすすめ #可愛いは正義 #地雷系女子""",
    """オリキャラってさ、自分の子じゃん。かわいくしてあげよ。かわいくしてあげて！！（圧）

https://mofu-mitsu.github.io/orikyara-profile-maker/""",
    """推し語りしたいけど長すぎて見てもらえない〜って時はこのツールで爆モテしよ？

https://mofu-mitsu.github.io/oshi-profile-maker/""",
    """自分の好きとか可愛いとか詰め込んだ世界がここにあるの、まじ。もふみつ工房、いちばんの居場所

https://mofu-mitsu.github.io/""",
    """みりんてゃが愛してやまない神ツールたち、ちょっとでも触れてほしいから見て！？え？まだ見てない？うそでしょ？？？

https://mofu-mitsu.github.io/""",
    """やばい…やったら泣いた（嬉しいのとしんどいのと情緒で）
好きな人とやって？ほんと、心えぐられる（褒めてる）

https://mofu-mitsu.github.io/fluffy-love-check/

#恋バナ #相性診断中毒 #みりんてゃのおすすめ""",
    """え、オリキャラのこと…もっとみんなに見てほしいよね！？
かわいさ1000%のプロフ作れるって神なの？

https://mofu-mitsu.github.io/orikyara-profile-maker/

#オリキャラ沼 #みりんてゃのおすすめ #創作民集合""",
    """ねぇねぇっ！まじでかわいいの詰まってる場所あるんだけど！？
あたしのいるとこ♡ 入国して〜〜ッッ！！

https://mofu-mitsu.github.io/

#みりんてゃのおすすめ #もふみつ工房 #地雷系女子の楽園""",
    """推しって！世界でいちばんかわいく紹介されるべきじゃん！？
このツール、まじ革命。控えめに言って天才

→ https://mofu-mitsu.github.io/oshi-profile-maker/

#推し語り用ツール #みりんてゃのおすすめ #推ししか勝たん""",
    """ふわふわ相性診断ってやつやったら、情緒バグった。おすすめ

https://mofu-mitsu.github.io/fluffy-love-check/""",
    """推し、語るだけじゃ足りなくない？ 推しプロフィールメーカーってのがあるらしいよ

https://mofu-mitsu.github.io/oshi-profile-maker/""",
    """オリキャラ持ってる人、集合〜！プロフィールかわいく作れるツール見つけた♡

https://mofu-mitsu.github.io/orikyara-profile-maker/""",
    """あ、そういえば もふみつ工房 見た？ あたしの大事な居場所なんだけど〜♡

https://mofu-mitsu.github.io/""",
    """あなたと気になるあの子の相性、ふわっと診断してあげる〜
可愛くてちょっと切ない結果もあるかも？

https://mofu-mitsu.github.io/fluffy-love-check/

#ふわふわ相性診断 #恋愛診断 #地雷系女子""",
    """あなたのオリキャラ、もっと輝かせよ？
アイコン付きでかわいく紹介できるよ〜！

https://mofu-mitsu.github.io/orikyara-profile-maker/

#オリキャラ #創作クラスタ""",
]

# facets生成（絵文字対応＆バイト位置対応）
def generate_facets_from_text(text, hashtags):
    text_bytes = text.encode("utf-8")
    facets = []
    for tag in hashtags:
        tag_bytes = tag.encode("utf-8")
        start = text_bytes.find(tag_bytes)
        if start != -1:
            facets.append({
                "index": {
                    "byteStart": start,
                    "byteEnd": start + len(tag_bytes)
                },
                "features": [{
                    "$type": "app.bsky.richtext.facet#tag",
                    "tag": tag.lstrip("#")
                }]
            })
    # URL facets
    url_pattern = r'(https?://[^\s]+)'
    for match in re.finditer(url_pattern, text):
        url = match.group(0)
        start = text_bytes.find(url.encode("utf-8"))
        if start != -1:
            facets.append({
                "index": {
                    "byteStart": start,
                    "byteEnd": start + len(url.encode("utf-8"))
                },
                "features": [{
                    "$type": "app.bsky.richtext.facet#link",
                    "uri": url
                }]
            })

    return facets

# 文字正規化
def normalize_text(text):
    return unicodedata.normalize("NFKC", text).strip()

# 投稿処理
client = Client()
client.login(HANDLE, APP_PASSWORD)

raw_message = random.choice(POST_MESSAGES)
message = normalize_text(raw_message)
hashtags = [word for word in message.split() if word.startswith("#")]
facets = generate_facets_from_text(message, hashtags)

client.send_post(
    text=message,
    facets=facets if facets else None
)
